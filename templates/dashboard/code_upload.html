{% extends "base.html" %}
{% load extra_tags %}

{% block css %}
{{ block.super }}

<link rel="stylesheet" href="{{ STATIC_URL }}css/dashboard.css" type="text/css" />
{% endblock %}

{% block js %}
{{ block.super }}
<script type="text/javascript">

// function submit_code() {
//    console.log("Uploading code");
//    var file_name = $('.filename')[0].value;
//    var code = $('.code')[0].value;
//    console.log(file_name)
//    console.log(code)
//    $.post(dashboard.views.submit_code_upload, {file_name: file_name, code: code,} );
//    console.log("Posted")
//    $('.invalid-filename').css('display', 'inline');
//    return false;
   
// }

</script>
{% endblock %}

{% block breadcrumbs %}
  <a class="breadcrumb first-breadcrumb" href="{% url 'dashboard.views.dashboard' %}">Dashboard</a>
  <span class="breadcrumb">code upload</span>
{% endblock %}

{% block secondary-toolbar %}
{% include "dashboard/dashboard_toolbar.html" %}
{% endblock %}

{% block content %}

<h2 class='upload-header'> code upload for personal use </h2>
<h3 class='upload-small-header'>paste code in the text field below</h3>

<form id="code-upload" method="post" action="{% url 'dashboard.views.submit_code_upload' %}">
	{% csrf_token %}
    File name (with extension): <input type="text" name="filename" class="filename"> 
    {% if reload %} <span class="invalid-filename"> &nbsp; Please use a valid file extension</span> {% endif %}
    <br>
    <textarea type="text" name="code" class='code'></textarea> <br>
    <input type="submit" name="Submit"><br>
</form>
{% endblock %}
